<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>H·ªá Th·ªëng B√†y H√†ng GitHub V19.0</title>
    <style>
        :root { --p: #ee4d2d; --s: #1877f2; --g: #00b894; --dark: #2d3436; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; padding: 15px; }
        
        .card-step { background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 6px solid var(--s); }
        .num-circle { background: var(--dark); color: white; width: 30px; height: 30px; display: inline-flex; align-items: center; justify-content: center; border-radius: 50%; margin-right: 10px; font-weight: bold; }
        
        /* Ch·ªØ c√°i ƒë·ªãnh m·ªánh */
        .lucky-char { color: red; font-size: 28px; font-weight: 900; text-decoration: underline; padding: 0 5px; }
        
        /* N√∫t b·∫•m ki·ªÉu hi·ªán ƒë·∫°i */
        .btn { padding: 15px 20px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; color: white; width: 100%; margin: 8px 0; transition: 0.2s; font-size: 16px; }
        .btn-shopee { background: #ee4d2d; }
        .btn-edit { background: #00d2d3; }
        .btn-upload { background: #5f27cd; }
        .btn-ai { background: var(--g); width: 48%; display: inline-block; }
        .btn:active { transform: scale(0.98); }

        /* L∆∞·ªõi s·∫£n ph·∫©m */
        .market { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 12px; }
        .item { background: white; border: 1px solid #ddd; border-radius: 10px; padding: 10px; text-align: center; cursor: pointer; }
        .item img { width: 100%; height: 120px; object-fit: cover; border-radius: 5px; }

        /* Modal c√¥ng vi·ªác */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:1000; overflow-y:auto; }
        .modal-content { background: white; width: 95%; max-width: 550px; margin: 10px auto; padding: 20px; border-radius: 20px; }
        .sub-step { background: #f8f9fa; padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 5px solid var(--s); }
        input { width: 100%; padding: 12px; margin-top: 8px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; }
    </style>
</head>
<body>

<h1 style="text-align:center; color: var(--s);">üè™ SI√äU TH·ªä GITHUB V19.0</h1>

<div class="card-step" style="border-color: #ff9f43;">
    <h3><span class="num-circle">1</span> N·∫†P KHO & <span class="num-circle">2</span> NG∆Ø·ªúI MAY M·∫ÆN</h3>
    <input type="file" id="csv" accept=".csv" style="margin-bottom:15px">
    <div id="luckyBox" style="font-size: 22px; font-weight: bold; text-align: center; background: #eee; padding: 15px; border-radius: 10px;">
        H√¥m nay ƒë·∫øn l∆∞·ª£t: <span id="luckyName">---</span>
    </div>
</div>

<div class="card-step" style="border-color: #00d2d3;">
    <h3><span class="num-circle">3</span> CH·ªåN QU√Ä THEO CH·ªÆ CU·ªêI</h3>
    <div id="market" class="market"></div>
</div>

<div id="modal" class="modal">
    <div class="modal-content">
        <h2 id="mTitle" style="text-align: center; color: var(--p);"></h2>
        
        <div class="sub-step">
            <b>üëâ B∆Ø·ªöC 4: L·∫§Y ·∫¢NH G·ªêC & R√öT G·ªåN LINK</b><br>
            1. <button class="btn btn-shopee" onclick="goShopee()">M·ªû SHOPEE (ƒê√É T·ª∞ COPY LINK G·ªêC)</button>
            <small><i>B√© sang Shopee: Chu·ªôt ph·∫£i v√†o ·∫£nh to -> "Sao ch√©p ƒë·ªãa ch·ªâ h√¨nh ·∫£nh"</i></small><br><br>
            2. <button class="btn btn-edit" onclick="window.open('https://www.photopea.com/', '_blank')">M·ªû WEB S·ª¨A ·∫¢NH (GI·ªêNG PHOTOSHOP)</button>
            <small><i>D√°n ·∫£nh v√†o, c·∫Øt c√∫p cho ƒë·∫πp r·ªìi l∆∞u v·ªÅ m√°y.</i></small>
        </div>

        <div class="sub-step">
            <b>üëâ B∆Ø·ªöC 5: T·∫¢I ·∫¢NH L√äN KHO & L·∫§Y LINK</b><br>
            1. <button class="btn btn-upload" onclick="window.open('https://postimages.org/', '_blank')">T·∫¢I ·∫¢NH L√äN WEB L·∫§Y LINK (POSTIMAGES)</button>
            <small><i>Sau khi t·∫£i xong, b√© nh·ªõ copy d√≤ng <b>"Direct Link"</b> (Link tr·ª±c ti·∫øp)</i></small>
            <input type="text" id="imgLink" placeholder="D√°n Direct Link ·∫£nh ƒë·∫πp v√†o ƒë√¢y...">
            <br><br>
            2. <input type="text" id="affLink" placeholder="D√°n Link Shopee R√∫t G·ªçn (m√†u xanh) v√†o ƒë√¢y...">
        </div>

        <div class="sub-step">
            <b>üëâ B∆Ø·ªöC 6: NH·ªú PH√ô TH·ª¶Y AI K·ªÇ CHUY·ªÜN</b><br>
            <button class="btn btn-ai" onclick="askAI('ChatGPT')">ChatGPT</button>
            <button class="btn btn-ai" onclick="askAI('Gemini')">Gemini</button>
            <button class="btn btn-ai" onclick="askAI('DeepSeek')">DeepSeek</button>
            <button class="btn btn-ai" onclick="askAI('Grok')">Grok</button>
        </div>

        <button class="btn" style="background:#636e72" onclick="closeModal()">QUAY L·∫†I CH·ªåN M√ìN KH√ÅC</button>
    </div>
</div>

<div class="card-step" style="border-color: var(--dark);">
    <h3><span class="num-circle">7</span> XU·∫§T FILE L√äN GITHUB</h3>
    <button class="btn" style="background: var(--dark);" onclick="exportJson()">üíæ XU·∫§T FILE FILES.JSON</button>
    <p style="font-size:12px; text-align:center">B·ªë l·∫•y file n√†y ƒë√® l√™n file c≈© tr√™n GitHub l√† xong!</p>
</div>

<script>
    const fixedMems = [
        {n:"NGUY·ªÑN KH·∫ÆC NƒÇNG", d:"1944", g:"Nam", cat:"Ng∆∞·ªùi gi√†"}, 
        {n:"T√î TH·ªä H√Ä", d:"1948", g:"N·ªØ", cat:"Ng∆∞·ªùi gi√†"},
        {n:"NGUY·ªÑN MINH NAM", d:"1971", g:"Nam", cat:"Trung ni√™n"},
        {n:"TH√ÇN TH·ªä KIM ANH", d:"1981", g:"N·ªØ", cat:"Trung ni√™n"},
        {n:"NGUY·ªÑN T√î NG√ÇN AN", d:"2014", g:"N·ªØ", cat:"Tr·∫ª em"},
        {n:"NGUY·ªÑN T√î MINH CH√ÇU", d:"2016", g:"N·ªØ", cat:"Tr·∫ª em"}
    ];

    let warehouse = [];
    let lucky = null;
    let selected = null;

    function init() {
        const offset = Math.floor((new Date() - new Date("2026-01-01")) / (1000*60*60*24));
        lucky = fixedMems[offset % fixedMems.length];
        const lastChar = lucky.n.trim().slice(-1);
        document.getElementById('luckyName').innerHTML = lucky.n.slice(0,-1) + `<span class="lucky-char">${lastChar}</span>`;
    }

    document.getElementById('csv').onchange = async (e) => {
        const text = await e.target.files[0].text();
        const lines = text.split('\n').slice(1);
        warehouse = lines.map(l => {
            const c = l.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
            if(c.length >= 4) return { id: c[0].trim(), name: c[1].replace(/"/g, ''), price: c[2], img: c[3]?.trim().replace(/"/g, ''), link: c[c.length-1].trim().replace(/"/g, ''), aff: "", imgNew: "" };
        }).filter(x => x);
        renderMarket();
    };

    function renderMarket() {
        const area = document.getElementById('market');
        area.innerHTML = "";
        const char = lucky.n.trim().slice(-1).toUpperCase();

        warehouse.forEach(p => {
            const pChar = p.name.trim().slice(-1).toUpperCase();
            if (pChar !== char) return;
            const item = document.createElement('div');
            item.className = 'item';
            item.onclick = () => {
                selected = p;
                document.getElementById('mTitle').innerText = p.name;
                document.getElementById('modal').style.display = 'block';
                document.getElementById('imgLink').value = p.imgNew;
                document.getElementById('affLink').value = p.aff;
            };
            item.innerHTML = `<img src="${p.img}"><div>${p.name.slice(0,-1)}<span class="lucky-char">${p.name.slice(-1)}</span></div>`;
            area.appendChild(item);
        });
    }

    function goShopee() {
        navigator.clipboard.writeText(selected.link);
        window.open(selected.link, '_blank');
    }

    function askAI(type) {
        selected.aff = document.getElementById('affLink').value;
        selected.imgNew = document.getElementById('imgLink').value;
        
        if(!selected.aff || !selected.imgNew) return alert("B√© ch∆∞a d√°n ƒë·ªß link ·∫£nh ho·∫∑c link r√∫t g·ªçn!");

        const ghUrl = `https://namnguyen7133-png.github.io/cua-hang-di-dong/001-kho-hang.html?id=${selected.id}`;
        const prompt = `Vi·∫øt m·ªôt c√¢u chuy·ªán ng·ª• ng√¥n c·ª±c hay v·ªÅ ${lucky.n} (${lucky.g}). Do duy√™n n·ª£ ch·ªØ "${selected.name.slice(-1)}" ·ªü cu·ªëi t√™n m√† ƒë∆∞·ª£c t·∫∑ng m√≥n qu√† "${selected.name}". B√†i vi·∫øt k√®m ·∫£nh n√†y: ${selected.imgNew}. Link xem s·ª± t√≠ch v√† mua h√†ng: ${ghUrl}. (Nh·∫Øc m·ªçi ng∆∞·ªùi d√πng 4G ƒë·ªÉ ·ªßng h·ªô con nh√©)`;
        
        navigator.clipboard.writeText(prompt);
        alert("ƒê√£ copy Prompt! ƒêang m·ªü " + type);
        const urls = { ChatGPT: "https://chatgpt.com", Gemini: "https://gemini.google.com", DeepSeek: "https://chat.deepseek.com", Grok: "https://x.com/i/grok" };
        window.open(urls[type], '_blank');
    }

    function closeModal() {
        selected.aff = document.getElementById('affLink').value;
        selected.imgNew = document.getElementById('imgLink').value;
        document.getElementById('modal').style.display = 'none';
        localStorage.setItem('war_v19', JSON.stringify(warehouse));
    }

    function exportJson() {
        const blob = new Blob([JSON.stringify(warehouse, null, 2)], {type: 'application/json'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'files.json';
        a.click();
    }

    init();
</script>
</body>
</html>
