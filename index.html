<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>H·ªá Th·ªëng Marketing Gia ƒê√¨nh - B·∫£n Chu·∫©n 2026</title>
    <style>
        :root { --p: #ee4d2d; --s: #1877F2; --v: #9b59b6; --g: #27ae60; --dark: #2d3436; --gpt: #10a37f; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; padding: 20px; margin: 0; }
        .box { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h2 { color: var(--p); border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 0; }
        
        /* Member Selection */
        .member-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(135px, 1fr)); gap: 10px; margin: 15px 0; max-height: 250px; overflow-y: auto; padding: 10px; border: 1px inset #eee; background: #fafafa; }
        .m-btn { padding: 10px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; background: #fff; font-size: 11px; text-align: left; position: relative; transition: 0.2s; }
        .m-btn.active { background: var(--v); color: white; border-color: var(--v); font-weight: bold; }
        .del-btn { position: absolute; top: 2px; right: 2px; background: #ff4757; color: white; border: none; border-radius: 50%; width: 18px; height: 18px; font-size: 10px; cursor: pointer; display: none; z-index: 10; }
        .m-btn:hover .del-btn { display: block; }

        /* Form nh·∫≠p m·ªõi */
        .form-row { display: flex; gap: 10px; flex-wrap: wrap; background: #e3f2fd; padding: 15px; border-radius: 10px; margin-bottom: 15px; align-items: center; }
        input, select { padding: 8px; border: 1px solid #ddd; border-radius: 5px; }
        
        /* Table */
        .table-container { max-height: 400px; overflow-y: auto; border: 1px solid #eee; }
        table { width: 100%; border-collapse: collapse; }
        th { background: var(--dark); color: white; padding: 12px; font-size: 12px; position: sticky; top: 0; }
        td { border-bottom: 1px solid #eee; padding: 10px; text-align: center; font-size: 12px; }
        
        .btn { border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; color: white; font-weight: bold; }
        .btn-ai { font-size: 10px; margin: 2px; width: 85px; cursor: pointer; border-radius: 5px; border: none; color: white; padding: 6px; }
        .status-bar { background: var(--v); color: white; padding: 12px; border-radius: 8px; text-align: center; font-weight: bold; margin-bottom: 10px; }
        textarea { width: 100%; height: 100px; margin-top: 10px; border-radius: 10px; border: 1px solid #ddd; padding: 10px; box-sizing: border-box; }
    </style>
</head>
<body>

<div style="max-width: 1200px; margin: auto;">
    <h1 style="text-align: center; color: var(--p);">üè† H·ªÜ TH·ªêNG MARKETING GIA ƒê√åNH TO√ÄN DI·ªÜN</h1>

    <div class="box" style="background: #fff3bf; border: 2px solid #fab005;">
        <strong>üåê ƒê·ªäA CH·ªà WEB GIA ƒê√åNH (D√πng ƒë·ªÉ ƒëƒÉng b√†i):</strong><br>
        <input type="text" id="ghBase" style="width: 80%; margin-top: 5px;" 
               value="https://namnguyen7133-png.github.io/cua-hang-di-dong/001-kho-hang.html" onchange="saveConfig()">
        <p style="font-size: 11px; color: #666; margin: 5px 0;">(H·ªá th·ªëng s·∫Ω t·ª± th√™m ƒëu√¥i ?id=... ƒë·ªÉ kh√°ch b·∫•m v√†o l√† th·∫•y ƒë√∫ng m√≥n h√†ng)</p>
    </div>

    <div class="box">
        <h2>1. CH·ªåN NG∆Ø·ªúI NH·∫¨N</h2>
        <div class="form-row">
            <strong>Th√™m B·∫°n:</strong>
            <input type="text" id="inName" placeholder="T√™n...">
            <input type="date" id="inBirth">
            <select id="inGen"><option value="Nam">Nam</option><option value="N·ªØ">N·ªØ</option></select>
            <button class="btn" style="background:var(--g)" onclick="addMember()">+ Th√™m</button>
            <button class="btn" style="background:#ff4757" onclick="clearExtra()">üóëÔ∏è X√≥a kh√°ch m·ªõi</button>
        </div>
        
        <div class="member-grid" id="memberList"></div>
        <div id="statusBar" class="status-bar">üëâ B∆Ø·ªöC 1: H√ÉY CH·ªåN M·ªòT NG∆Ø·ªúI TR√äN DANH S√ÅCH!</div>
    </div>

    <div class="box">
        <h2>2. CH·ªåN S·∫¢N PH·∫®M & GOI AI K·ªÇ CHUY·ªÜN</h2>
        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
            <input type="file" id="csvFile" multiple accept=".csv" style="flex:1">
            <input type="text" id="searchP" style="flex:1" placeholder="üîç T√¨m t√™n s·∫£n ph·∫©m..." oninput="renderWarehouse()">
            <button class="btn" style="background:var(--gpt)" onclick="exportJson()">üíæ Xu·∫•t files.json</button>
        </div>
        
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>T√™n S·∫£n Ph·∫©m</th>
                        <th width="350">Ch·ªçn AI (T·ª± ƒë·ªông copy c√¢u l·ªánh)</th>
                        <th width="50">X√≥a</th>
                    </tr>
                </thead>
                <tbody id="productArea"></tbody>
            </table>
        </div>
    </div>

    <div class="box">
        <h2>3. K·∫æT QU·∫¢ AI</h2>
        <textarea id="finalPrompt" placeholder="L·ªánh AI s·∫Ω hi·ªán ·ªü ƒë√¢y sau khi b·∫°n b·∫•m n√∫t ph√≠a tr√™n..."></textarea>
    </div>
</div>

<script>
    // DANH S√ÅCH 32 NG∆Ø·ªúI G·ªêC
    const fixedMembers = [
        {n:"NGUY·ªÑN KH·∫ÆC NƒÇNG", d:"1944-06-04", g:"Nam"}, {n:"T√î TH·ªä H√Ä", d:"1948-08-29", g:"N·ªØ"},
        {n:"NGUY·ªÑN MINH NAM", d:"1971-03-03", g:"Nam"}, {n:"TH√ÇN TH·ªä KIM ANH", d:"1981-09-23", g:"N·ªØ"},
        {n:"NGUY·ªÑN T√î NG√ÇN AN", d:"2014-09-28", g:"N·ªØ"}, {n:"NGUY·ªÑN T√î MINH CH√ÇU", d:"2016-07-25", g:"N·ªØ"},
        {n:"NGUY·ªÑN T√î B√çCH NG·ªåC", d:"2020-02-05", g:"N·ªØ"}, {n:"NGUY·ªÑN TH·ªä MINH H·∫∞NG", d:"1974-01-07", g:"N·ªØ"},
        {n:"NG√î QU√ù C∆Ø·ªúNG", d:"1973-05-23", g:"Nam"}, {n:"NG√î GIA B√ÅCH", d:"2000-10-12", g:"Nam"},
        {n:"NG√î GIA LINH", d:"2005-04-05", g:"N·ªØ"}, {n:"NGUY·ªÑN TH·ªä MINH PH∆Ø∆†NG", d:"1978-11-06", g:"N·ªØ"},
        {n:"HO√ÄNG ANH D≈®NG", d:"1978-09-21", g:"Nam"}, {n:"HO√ÄNG H·∫¢I VINH", d:"2010-06-03", g:"Nam"},
        {n:"HO√ÄNG THI√äN B·∫†CH ANH", d:"2015-11-14", g:"N·ªØ"}, {n:"T√î KIM HU·ªÜ", d:"1960-08-09", g:"N·ªØ"},
        {n:"NGUY·ªÑN TU·∫§N ANH", d:"1983-10-23", g:"Nam"}, {n:"NGUY·ªÑN TH·∫æ ANH", d:"2001-03-24", g:"Nam"},
        {n:"NG√î TH·ªä MAI", d:"1948-12-12", g:"N·ªØ"}, {n:"T√î VI·ªÜT H∆ØNG", d:"1996-06-17", g:"Nam"},
        {n:"T√î TH·ªä H·ªíNG", d:"1964-10-10", g:"N·ªØ"}, {n:"V≈® VƒÇN HI·ªÜP", d:"1974-04-24", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä CHI", d:"1946-02-08", g:"N·ªØ"}, {n:"NGUY·ªÑN T√ÇN B·∫ÆC", d:"1957-11-30", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä T√ÇM", d:"1954-08-08", g:"N·ªØ"}, {n:"TH√ÇN VƒÇN GI·ªÆ", d:"1955-04-18", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä B√åNH", d:"1958-05-21", g:"N·ªØ"}, {n:"TH√ÇN TH·ªä B√çCH NGUY·ªÜT", d:"1980-05-21", g:"N·ªØ"},
        {n:"TH√ÇN VƒÇN TU·∫§N", d:"1983-05-21", g:"Nam"}, {n:"TH√ÇN Y·∫æN NHI", d:"2010-03-26", g:"N·ªØ"},
        {n:"L√ä TH·ªä PH∆Ø∆†NG", d:"1990-06-26", g:"N·ªØ"}, {n:"NGUY·ªÑN HO√ÄI NAM", d:"2004-06-02", g:"Nam"}
    ];

    let extraMembers = JSON.parse(localStorage.getItem('extra_2026')) || [];
    let warehouse = JSON.parse(localStorage.getItem('ware_2026')) || [];
    let selectedM = null;

    function saveConfig() { localStorage.setItem('ghBase', document.getElementById('ghBase').value); renderWarehouse(); }

    function renderMembers() {
        const all = [...extraMembers, ...fixedMembers];
        const grid = document.getElementById('memberList');
        grid.innerHTML = all.map((m, i) => {
            const age = Math.floor((new Date() - new Date(m.d))/31557600000);
            return `
                <div style="position:relative">
                    <button class="m-btn ${selectedM && selectedM.n === m.n ? 'active' : ''}" onclick='selectM(${JSON.stringify(m)})'>
                        <strong>${m.n}</strong><br><small>${m.g} - ${age}t</small>
                    </button>
                    ${i < extraMembers.length ? `<button class="del-btn" onclick="deleteExtra(${i})">√ó</button>` : ''}
                </div>
            `;
        }).join('');
    }

    function selectM(m) {
        selectedM = m;
        selectedM.age = Math.floor((new Date() - new Date(m.d))/31557600000);
        document.getElementById('statusBar').innerText = `‚úÖ ƒê√É CH·ªåN: ${m.n} (${selectedM.age} tu·ªïi)`;
        renderMembers();
    }

    function addMember() {
        const n = document.getElementById('inName').value;
        const d = document.getElementById('inBirth').value;
        const g = document.getElementById('inGen').value;
        if(n && d) { extraMembers.unshift({n, d, g}); saveM(); }
    }
    function deleteExtra(i) { extraMembers.splice(i,1); saveM(); }
    function clearExtra() { if(confirm("X√≥a h·∫øt kh√°ch m·ªõi?")) { extraMembers=[]; saveM(); } }
    function saveM() { localStorage.setItem('extra_2026', JSON.stringify(extraMembers)); renderMembers(); }

    document.getElementById('csvFile').onchange = async (e) => {
        const files = Array.from(e.target.files);
        for (const file of files) {
            const text = await file.text();
            const lines = text.split('\n').slice(1);
            lines.forEach(l => {
                const c = l.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                if(c.length >= 8) {
                    const id = c[0].trim();
                    if(!warehouse.some(p => p.id === id)) {
                        warehouse.push({ id, name: c[1]?.replace(/"/g, '').split(' ').slice(0, 6).join(' ').trim() });
                    }
                }
            });
        }
        saveW();
    };

    function renderWarehouse() {
        const tbody = document.getElementById('productArea');
        const search = document.getElementById('searchP').value.toLowerCase();
        const ghBase = document.getElementById('ghBase').value;
        const filtered = warehouse.filter(p => p.name.toLowerCase().includes(search));

        tbody.innerHTML = filtered.slice().reverse().map(p => {
            const finalLink = `${ghBase}?id=${p.id}`;
            return `
                <tr>
                    <td style="text-align:left">${p.name}</td>
                    <td>
                        <button class="btn-ai" style="background:var(--v)" onclick="goAI('DeepSeek','${p.id}','${finalLink}')">DeepSeek</button>
                        <button class="btn-ai" style="background:var(--s)" onclick="goAI('Gemini','${p.id}','${finalLink}')">Gemini</button>
                        <button class="btn-ai" style="background:var(--gpt)" onclick="goAI('ChatGPT','${p.id}','${finalLink}')">ChatGPT</button>
                    </td>
                    <td><button onclick="delP('${p.id}')">‚ùå</button></td>
                </tr>
            `;
        }).join('');
    }

    function goAI(ai, id, link) {
        if(!selectedM) return alert("B√© ch·ªçn ng∆∞·ªùi nh·∫≠n tr∆∞·ªõc!");
        const p = warehouse.find(x => x.id === id);
        let kieuTruyen = selectedM.age < 13 ? 
            "m·ªôt c√¢u chuy·ªán ng·ª• ng√¥n h√†i h∆∞·ªõc v√† √Ω nghƒ©a cho tr·∫ª em" : 
            "m·ªôt b√†i ƒëƒÉng Facebook h√†i h∆∞·ªõc, m·∫∑n m√† ho·∫∑c l·ªùi ch√∫c s√¢u s·∫Øc";
        
        const prompt = `Vi·∫øt m·ªôt n·ªôi dung ƒëƒÉng Facebook ${kieuTruyen}. 
Nh√¢n v·∫≠t ch√≠nh: ${selectedM.n} (${selectedM.age} tu·ªïi, gi·ªõi t√≠nh ${selectedM.g}). 
M√≥n ƒë·ªì xu·∫•t hi·ªán trong truy·ªán: ${p.name}. 
Phong c√°ch: Th√¢n m·∫≠t gia ƒë√¨nh. 
Cu·ªëi b√†i ch√®n link xem chi ti·∫øt n√†y: ${link}`;

        document.getElementById('finalPrompt').value = prompt;
        navigator.clipboard.writeText(prompt).then(() => {
            alert(`‚úÖ ƒê√£ copy l·ªánh cho ${ai}!\nB√© sang d√°n (Ctrl+V) v√†o AI l√† xong.`);
            const urls = {
                'DeepSeek': "https://chat.deepseek.com",
                'Gemini': "https://gemini.google.com/app",
                'ChatGPT': "https://chatgpt.com"
            };
            window.open(urls[ai], '_blank');
        });
    }

    function delP(id) { warehouse = warehouse.filter(x => x.id !== id); saveW(); }
    function clearWare() { if(confirm("X√≥a s·∫°ch kho?")) { warehouse = []; saveW(); } }
    function saveW() { localStorage.setItem('ware_2026', JSON.stringify(warehouse)); renderWarehouse(); }
    function exportJson() {
        const blob = new Blob([JSON.stringify(warehouse, null, 2)], {type: 'application/json'});
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'files.json'; a.click();
    }

    renderMembers();
    renderWarehouse();
</script>
</body>
</html>
