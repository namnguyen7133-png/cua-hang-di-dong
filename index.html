<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Affiliate Gia ƒê√¨nh 2026 - B·∫£n Cho Tr·∫ª Em</title>
    <style>
        :root { --p: #ee4d2d; --s: #1877F2; --v: #9b59b6; --g: #27ae60; --dark: #2d3436; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; padding: 20px; }
        .box { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h2 { color: var(--p); border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 0; }
        
        /* Grid ng∆∞·ªùi th√¢n */
        .member-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin: 15px 0; }
        .m-btn { padding: 12px; border: 1px solid #ddd; border-radius: 10px; cursor: pointer; background: #fff; font-size: 11px; position: relative; text-align: left; }
        .m-btn.active { background: var(--v); color: white; border-color: var(--v); }
        .del-one { position: absolute; top: -5px; right: -5px; background: #ff4757; color: white; border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer; font-weight: bold; }

        /* H∆∞·ªõng d·∫´n cho b√© */
        .tutorial { background: #fff9db; border-left: 5px solid #fcc419; padding: 15px; margin-bottom: 15px; border-radius: 5px; }
        .tutorial b { color: #e67e22; }

        table { width: 100%; border-collapse: collapse; }
        th { background: var(--dark); color: white; padding: 10px; font-size: 13px; }
        td { border-bottom: 1px solid #eee; padding: 10px; text-align: center; }
        
        .btn { border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; color: white; font-weight: bold; }
        .btn-ai { font-size: 10px; margin: 2px; }
    </style>
</head>
<body>

<div style="max-width: 1200px; margin: auto;">
    <h1 style="text-align: center; color: var(--p);">üè† H·ªÜ TH·ªêNG C·ª¶A B√â (6-10-12 TU·ªîI)</h1>

    <div class="box tutorial" id="tutArea">
        <h3>üåü B√â ∆†I, L√ÄM THEO C√ÅC B∆Ø·ªöC N√ÄY NH√â:</h3>
        <p>1. <b>B·∫•m ch·ªçn 1 ng∆∞·ªùi th√¢n</b> ·ªü danh s√°ch b√™n d∆∞·ªõi (n√∫t hi·ªán m√†u t√≠m l√† ƒë∆∞·ª£c).</p>
        <p>2. Ch·ªçn m√≥n h√†ng mu·ªën b√°n, r·ªìi b·∫•m n√∫t <b>AI (DeepSeek/Gemini/GPT)</b>.</p>
        <p>3. Khi AI hi·ªán ra, b√© ch·ªâ c·∫ßn nh·∫•n ph√≠m <b>Ctrl + V</b> (ho·∫∑c chu·ªôt ph·∫£i ch·ªçn D√°n) r·ªìi nh·∫•n Enter. Th·∫ø l√† xong!</p>
    </div>

    <div class="box">
        <h2>1. CH·ªåN NG∆Ø·ªúI NH·∫¨N QU√Ä</h2>
        <div style="background:#e7f5ff; padding:15px; border-radius:10px; margin-bottom:15px;">
            <input type="text" id="inN" placeholder="T√™n kh√°ch m·ªõi...">
            <input type="date" id="inD">
            <select id="inG"><option value="Nam">Nam</option><option value="N·ªØ">N·ªØ</option></select>
            <button class="btn" style="background:var(--g)" onclick="addM()">+ Th√™m Ng∆∞·ªùi</button>
            <button class="btn" style="background:#ff4757" onclick="clearAllM()">üóëÔ∏è X√≥a h·∫øt danh s√°ch</button>
        </div>
        <div class="member-grid" id="mList"></div>
    </div>

    <div class="box">
        <h2>2. CH·ªåN H√ÄNG V√Ä G·ªåI AI</h2>
        <input type="file" id="csv" multiple accept=".csv" style="margin-bottom:15px">
        <table>
            <thead>
                <tr>
                    <th>T√™n S·∫£n Ph·∫©m</th>
                    <th>Link GitHub</th>
                    <th>B√© b·∫•m ch·ªçn AI ƒë·ªÉ k·ªÉ truy·ªán</th>
                </tr>
            </thead>
            <tbody id="pArea"></tbody>
        </table>
    </div>
</div>

<script>
    let members = JSON.parse(localStorage.getItem('mems_v3')) || [];
    let warehouse = JSON.parse(localStorage.getItem('ware_v3')) || [];
    let activeM = null;

    function renderM() {
        const list = document.getElementById('mList');
        list.innerHTML = members.map((m, i) => `
            <div style="position:relative">
                <button class="m-btn ${activeM && activeM.n === m.n ? 'active' : ''}" onclick="selM(${i})">
                    <b>${m.n}</b><br><small>${m.g} - ${calcAge(m.d)}t</small>
                </button>
                <button class="del-one" onclick="delOneM(${i})">√ó</button>
            </div>
        `).join('');
    }

    function calcAge(d) { return Math.floor((new Date() - new Date(d))/31557600000); }

    function selM(i) {
        activeM = members[i];
        activeM.age = calcAge(activeM.d);
        renderM();
    }

    function addM() {
        const n = document.getElementById('inN').value;
        const d = document.getElementById('inD').value;
        const g = document.getElementById('inG').value;
        if(!n || !d) return alert("B√© nh·∫≠p t√™n v√† ng√†y sinh ƒë√£!");
        members.unshift({n, d, g});
        saveM();
    }

    function delOneM(i) { members.splice(i, 1); saveM(); }
    function clearAllM() { if(confirm("X√≥a s·∫°ch danh s√°ch ng∆∞·ªùi th√¢n?")) { members = []; saveM(); } }
    function saveM() { localStorage.setItem('mems_v3', JSON.stringify(members)); renderM(); }

    document.getElementById('csv').onchange = async (e) => {
        const files = Array.from(e.target.files);
        for (const file of files) {
            const text = await file.text();
            const lines = text.split('\n').slice(1);
            lines.forEach(l => {
                const c = l.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                if(c.length >= 8) {
                    const id = c[0].trim();
                    if(!warehouse.some(p => p.id === id)) {
                        warehouse.push({ id, n: c[1]?.replace(/"/g, '').split(' ').slice(0, 5).join(' ').trim(), l: c[8]?.trim() || c[7]?.trim() });
                    }
                }
            });
        }
        renderW();
    };

    function renderW() {
        const area = document.getElementById('pArea');
        area.innerHTML = warehouse.slice(-10).reverse().map(p => `
            <tr>
                <td>${p.n}</td>
                <td><input value="${p.l}" onchange="upW('${p.id}', this.value)" style="width:90%"></td>
                <td>
                    <button class="btn btn-ai" style="background:var(--v)" onclick="goAI('DeepSeek', '${p.id}')">DeepSeek</button>
                    <button class="btn btn-ai" style="background:var(--s)" onclick="goAI('Gemini', '${p.id}')">Gemini</button>
                    <button class="btn btn-ai" style="background:#10a37f" onclick="goAI('ChatGPT', '${p.id}')">ChatGPT</button>
                </td>
            </tr>
        `).join('');
    }

    function upW(id, v) { warehouse.find(x => x.id === id).l = v; localStorage.setItem('ware_v3', JSON.stringify(warehouse)); }

    function goAI(ai, id) {
        if(!activeM) return alert("B√© ∆°i, ch·ªçn 1 ng∆∞·ªùi ·ªü danh s√°ch tr√™n tr∆∞·ªõc ƒë√£!");
        const p = warehouse.find(x => x.id === id);
        
        // C√ÇU L·ªÜNH T·ª∞ ƒê·ªòNG CHO T·ª™NG ƒê·ªò TU·ªîI
        let prompt = "";
        const ageB√© = 10; // Gi·∫£ s·ª≠ b√© ƒëang d√πng m√°y l√† 10 tu·ªïi, b·∫°n c√≥ th·ªÉ ch·ªânh th√¥ng s·ªë n√†y

        if(ageB√© <= 7) { // Cho tr·∫ª 6 tu·ªïi
            prompt = `Ch√†o AI, m√¨nh l√† b√© 6 tu·ªïi. H√£y vi·∫øt m·ªôt m·∫©u truy·ªán si√™u ng·∫Øn v√† vui v·ªÅ b·∫°n ${activeM.n} (${activeM.age} tu·ªïi) v√† c√°i ${p.n}. H√£y d√πng t·ª´ ng·ªØ ƒë∆°n gi·∫£n, d·ªÖ th∆∞∆°ng. Cu·ªëi b√†i nh·ªõ ghi link n√†y ƒë·ªÉ m·ªçi ng∆∞·ªùi mua nh√©: ${p.l}`;
        } else if(ageB√© <= 10) { // Cho tr·∫ª 10 tu·ªïi
            prompt = `AI ∆°i, h√£y k·ªÉ m·ªôt c√¢u chuy·ªán ng·ª• ng√¥n h√†i h∆∞·ªõc v·ªÅ nh√¢n v·∫≠t ${activeM.n} (${activeM.age} tu·ªïi). Trong truy·ªán, ${activeM.n} t√¨m th·∫•y m·ªôt b·∫£o b·ªëi l√† ${p.n}. H√£y vi·∫øt theo phong c√°ch vui nh·ªôn ƒë·ªÉ ƒëƒÉng Facebook. Cu·ªëi truy·ªán h√£y ch√®n link c·ª≠a h√†ng GitHub n√†y: ${p.l}`;
        } else { // Cho tr·∫ª 12 tu·ªïi
            prompt = `Vi·∫øt m·ªôt b√†i vi·∫øt review s·∫£n ph·∫©m theo phong c√°ch k·ªÉ chuy·ªán s√°ng t·∫°o (Storytelling). Nh√¢n v·∫≠t ch√≠nh l√† ${activeM.n} (${activeM.age} tu·ªïi, ${activeM.g}). S·∫£n ph·∫©m l√† ${p.n}. H√£y l√†m cho c√¢u chuy·ªán th·∫≠t thu h√∫t, c√≥ y·∫øu t·ªë b·∫•t ng·ªù ƒë·ªÉ tƒÉng t∆∞∆°ng t√°c tr√™n Facebook/Zalo. Link mua h√†ng: ${p.l}`;
        }

        navigator.clipboard.writeText(prompt).then(() => {
            alert(`‚úÖ ƒê√É COPY C√ÇU L·ªÜNH!\nB√© sang d√°n v√†o ${ai} nh√©.`);
            const urls = { 'DeepSeek': "https://chat.deepseek.com", 'Gemini': "https://gemini.google.com/app", 'ChatGPT': "https://chatgpt.com" };
            window.open(urls[ai], '_blank');
        });
    }

    renderM(); renderW();
</script>
</body>
</html>
