<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gia ƒê√¨nh Affiliate 2026</title>
    <style>
        :root { --shopee: #ee4d2d; --male: #3498db; --female: #e91e63; --gold: #f1c40f; }
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f6; margin: 0; padding: 10px; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        /* Hi·ªáu ·ª©ng Banner */
        .birthday-banner { background: linear-gradient(90deg, #ff4d6d, #ff9a9e); color: white; padding: 20px; border-radius: 15px; text-align: center; margin-bottom: 20px; display: none; border: 3px solid gold; box-shadow: 0 0 20px rgba(255,215,0,0.5); }
        
        /* Grid ng∆∞·ªùi th√¢n */
        .member-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 10px; margin: 20px 0; }
        .m-btn { padding: 12px 5px; border: 2px solid #eee; border-radius: 10px; cursor: pointer; font-size: 13px; font-weight: bold; background: white; transition: 0.3s; position: relative; }
        .m-btn.nam { color: var(--male); border-bottom: 4px solid var(--male); }
        .m-btn.nu { color: var(--female); border-bottom: 4px solid var(--female); }
        .m-btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .m-btn.active { background: #333 !important; color: white !important; border-color: #333; }

        /* N√∫t ph√¢n lo·∫°i L-T-C-D */
        .price-row { display: flex; gap: 10px; margin-bottom: 20px; }
        .p-btn { flex: 1; border: none; padding: 15px; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; opacity: 0.8; }
        .p-btn.active { opacity: 1; transform: scale(1.05); box-shadow: 0 0 10px rgba(0,0,0,0.3); }
        .l-low { background: #27ae60; } .t-mid { background: #2980b9; } .c-high { background: #8e44ad; } .d-vip { background: #d35400; }

        table { width: 100%; border-collapse: collapse; }
        th { background: #f8f9fa; color: #666; padding: 12px; border-bottom: 2px solid #eee; }
        td { padding: 15px; border-bottom: 1px solid #eee; }
        .copy-btn { background: var(--shopee); color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; }
        
        .special-gift { background: #fff9c4 !important; }
    </style>
</head>
<body>

<div class="container">
    <div id="hpbd" class="birthday-banner">
        üéâ CH√öC M·ª™NG SINH NH·∫¨T: <strong id="memName"></strong>! ‚ú®<br>
        <small>H√¥m nay l√† ng√†y c·ªßa con, h√£y ch·ªçn nh·ªØng m√≥n qu√† tuy·ªát v·ªùi nh·∫•t nh√©!</small>
    </div>

    <div style="text-align: center;">
        <h2 style="color: var(--shopee); margin-bottom: 5px;">üõçÔ∏è C·ª¨A H√ÄNG GIA ƒê√åNH NAM NGUY·ªÑN</h2>
        <input type="file" id="csvFile" accept=".csv" style="margin: 10px 0;">
    </div>

    <div class="member-grid" id="memberGrid"></div>

    <div class="price-row">
        <button class="p-btn l-low active" onclick="changePrice('L', this)">R·∫ª (L)</button>
        <button class="p-btn t-mid" onclick="changePrice('T', this)">V·ª´a (T)</button>
        <button class="p-btn c-high" onclick="changePrice('C', this)">Cao (C)</button>
        <button class="p-btn d-vip" onclick="changePrice('D', this)">ƒê·∫Øt (D)</button>
    </div>

    <table>
        <thead>
            <tr>
                <th>S·∫£n ph·∫©m</th>
                <th>Gi√°</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody id="productArea">
            <tr><td colspan="3" style="text-align:center; padding: 50px;">N·∫°p file v√† ch·ªçn t√™n th√†nh vi√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu...</td></tr>
        </tbody>
    </table>
</div>

<script>
    const members = [
        {n: "NGUY·ªÑN KH·∫ÆC NƒÇNG", d: "04/06", g: "Nam", c: "G"}, {n: "T√î TH·ªä H√Ä", d: "29/08", g: "N·ªØ", c: "A"},
        {n: "NGUY·ªÑN MINH NAM", d: "03/03", g: "Nam", c: "M"}, {n: "TH√ÇN TH·ªä KIM ANH", d: "23/09", g: "N·ªØ", c: "H"},
        {n: "NGUY·ªÑN T√î NG√ÇN AN", d: "28/09", g: "N·ªØ", c: "N"}, {n: "NGUY·ªÑN T√î MINH CH√ÇU", d: "25/07", g: "N·ªØ", c: "U"},
        {n: "NGUY·ªÑN T√î B√çCH NG·ªåC", d: "05/02", g: "N·ªØ", c: "C"}, {n: "NGUY·ªÑN TH·ªä MINH H·∫∞NG", d: "07/01", g: "N·ªØ", c: "G"},
        {n: "NG√î QU√ù C∆Ø·ªúNG", d: "23/05", g: "Nam", c: "G"}, {n: "NG√î GIA B√ÅCH", d: "12/10", g: "Nam", c: "H"},
        {n: "NG√î GIALINH", d: "05/04", g: "N·ªØ", c: "H"}, {n: "NGUY·ªÑN TH·ªä MINH PH∆Ø∆†NG", d: "06/11", g: "N·ªØ", c: "G"},
        {n: "HO√ÄNG ANH D≈®NG", d: "21/09", g: "Nam", c: "G"}, {n: "HO√ÄNG H·∫¢I VINH", d: "03/06", g: "Nam", c: "H"},
        {n: "HO√ÄNG THI√äN B·∫†CH ANH", d: "14/11", g: "N·ªØ", c: "H"}, {n: "T√î KIM HU·ªÜ", d: "09/08", g: "N·ªØ", c: "E"},
        {n: "NGUY·ªÑN TU·∫§N ANH", d: "23/10", g: "Nam", c: "H"}, {n: "NGUY·ªÑN TH·∫æ ANH", d: "24/03", g: "Nam", c: "H"},
        {n: "NG√î TH·ªä MAI", d: "12/12", g: "N·ªØ", c: "I"}, {n: "T√î VI·ªÜT H∆ØNG", d: "17/06", g: "Nam", c: "G"},
        {n: "T√î TH·ªä H·ªíNG", d: "10/10", g: "N·ªØ", c: "G"}, {n: "V≈® VƒÇN HI·ªÜP", d: "24/04", g: "Nam", c: "P"},
        {n: "NGUY·ªÑN TH·ªä CHI", d: "08/02", g: "N·ªØ", c: "I"}, {n: "NGUY·ªÑN T·∫§N B·∫ÆC", d: "30/11", g: "Nam", c: "C"},
        {n: "NGUY·ªÑN TH·ªä T√ÇM", d: "08/08", g: "N·ªØ", c: "M"}, {n: "TH√ÇN VƒÇN GI·ªÆ", d: "18/04", g: "Nam", c: "U"},
        {n: "NGUY·ªÑN TH·ªä B√åNH", d: "21/05", g: "N·ªØ", c: "H"}, {n: "TH√ÇN TH·ªä B√çCH NGUY·ªÜT", d: "21/05", g: "N·ªØ", c: "T"},
        {n: "TH√ÇN VƒÇN TU·∫§N", d: "21/05", g: "Nam", c: "N"}, {n: "TH√ÇN Y·∫æN NHI", d: "26/03", g: "N·ªØ", c: "I"},
        {n: "L√ä TH·ªä PH∆Ø∆†NG", d: "26/06", g: "N·ªØ", c: "G"}, {n: "NGUY·ªÑN HO√ÄI NAM", d: "02/06", g: "Nam", c: "M"}
    ];

    let products = [];
    let activeMem = null;
    let activePrice = 'L';

    // T·∫°o n√∫t th√†nh vi√™n
    const grid = document.getElementById('memberGrid');
    members.forEach(m => {
        const b = document.createElement('button');
        b.className = `m-btn ${m.g === 'Nam' ? 'nam' : 'nu'}`;
        b.innerText = m.n;
        b.onclick = () => {
            document.querySelectorAll('.m-btn').forEach(x => x.classList.remove('active'));
            b.classList.add('active');
            activeMem = m;
            checkBirthday(m);
            render();
        };
        grid.appendChild(b);
    });

    function checkBirthday(m) {
        const today = new Date();
        const dm = ("0" + today.getDate()).slice(-2) + "/" + ("0" + (today.getMonth() + 1)).slice(-2);
        const banner = document.getElementById('hpbd');
        if(m.d.startsWith(dm)) {
            banner.style.display = 'block';
            document.getElementById('memName').innerText = m.n;
        } else {
            banner.style.display = 'none';
        }
    }

    document.getElementById('csvFile').onchange = (e) => {
        const reader = new FileReader();
        reader.onload = (f) => {
            const lines = f.target.result.split('\n').slice(1);
            products = lines.map(l => {
                const c = l.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                if(c.length < 8) return null;
                const price = parseInt(c[2]?.replace(/[^\d]/g, '') || "0");
                return { n: c[1]?.replace(/"/g, ''), ps: c[2], pn: price, l: c[8]?.trim() || c[7]?.trim() };
            }).filter(x => x);
            alert("ƒê√£ n·∫°p " + products.length + " s·∫£n ph·∫©m!");
        };
        reader.readAsText(e.target.files[0]);
    };

    function changePrice(t, b) {
        activePrice = t;
        document.querySelectorAll('.p-btn').forEach(x => x.classList.remove('active'));
        b.classList.add('active');
        render();
    }

    function render() {
        if(!activeMem || products.length === 0) return;
        let pool = products.filter(p => {
            if(activePrice === 'L') return p.pn < 50000;
            if(activePrice === 'T') return p.pn < 200000;
            if(activePrice === 'C') return p.pn < 1000000;
            return p.pn >= 1000000;
        });
        
        // L·ªçc th√¥ng minh: Ch·ªØ c√°i cu·ªëi t√™n ng∆∞·ªùi n·∫±m trong t√™n s·∫£n ph·∫©m
        const char = activeMem.c.toLowerCase();
        let show = pool.filter(p => p.n.toLowerCase().includes(char)).slice(0, 15);
        if(show.length === 0) show = pool.slice(0, 12);

        document.getElementById('productArea').innerHTML = show.map(p => `
            <tr>
                <td>${p.n}</td>
                <td style="color:var(--shopee); font-weight:bold;">${p.ps}</td>
                <td><button class="copy-btn" onclick="copy('${p.l}')">Copy Link</button></td>
            </tr>
        `).join('');
    }

    function copy(url) {
        navigator.clipboard.writeText(url).then(() => alert("ƒê√£ Copy! C√°c b√© d√°n l√™n Facebook nh√©! ‚ú®"));
    }
</script>
</body>
</html>
