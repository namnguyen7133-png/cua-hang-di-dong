<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Marketing Gia ƒê√¨nh V18.2 - TR·∫†M ƒêI·ªÄU H√ÄNH</title>
    <style>
        :root { --p: #ee4d2d; --s: #1877F2; --v: #9b59b6; --g: #27ae60; --dark: #2d3436; --x: #000000; --gpt: #10a37f; --shopee: #ff4742; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; padding: 15px; margin: 0; }
        
        /* B·∫¢NG H∆Ø·ªöNG D·∫™N TO ƒê·∫∏P */
        .guide-box { background: linear-gradient(135deg, #6e8efb, #a777e3); color: white; padding: 20px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .guide-box h2 { margin: 0 0 10px 0; font-size: 20px; }
        .guide-step { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; text-align: center; }
        .step-item { background: rgba(255,255,255,0.2); padding: 10px; border-radius: 10px; font-size: 13px; line-height: 1.4; border: 1px solid rgba(255,255,255,0.3); }
        .step-num { display: block; font-size: 24px; font-weight: bold; margin-bottom: 5px; }

        .box { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 15px; }
        h2 { color: var(--dark); border-bottom: 2px solid #eee; padding-bottom: 8px; margin-top: 0; font-size: 16px; text-transform: uppercase; }
        
        /* N√öT B·∫§M */
        .btn { padding: 8px 15px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-shopee { background: var(--p); color: white; }
        .btn-gh { background: var(--v); color: white; }
        
        .m-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 8px; max-height: 250px; overflow-y: auto; padding: 10px; background: #f9f9f9; border-radius: 8px; }
        .m-btn { padding: 8px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; background: #fff; font-size: 11px; text-align: left; position: relative; width: 100%; }
        .m-btn.active { background: var(--v); color: white; font-weight: bold; border-color: var(--v); }
        
        table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 10px; }
        th { background: var(--dark); color: white; padding: 10px; }
        td { border-bottom: 1px solid #eee; padding: 12px 8px; text-align: center; }
        .input-aff { width: 140px; border: 2px solid var(--g); border-radius: 4px; padding: 5px; }
        .btn-ai { font-size: 10px; padding: 8px; border-radius: 4px; border: none; color: white; cursor: pointer; font-weight: bold; margin: 2px; }
    </style>
</head>
<body>

<div style="max-width: 1300px; margin: auto;">
    
    <div class="guide-box">
        <h2>üö© H∆Ø·ªöNG D·∫™N 4 B∆Ø·ªöC CHO C√ÅC SI√äU NH√ÇN MARKETING</h2>
        <div class="guide-step">
            <div class="step-item">
                <span class="step-num">1</span>
                <b>COPY LINK GITHUB</b><br>B·∫•m n√∫t m√†u tr·∫Øng ·ªü c·ªôt s·ªë 1 ƒë·ªÉ l·∫•y link d√°n Facebook.
            </div>
            <div class="step-item">
                <span class="step-num">2</span>
                <b>R√öT G·ªåN SHOPEE</b><br>B·∫•m n√∫t Cam ‚ÜóÔ∏è ƒë·ªÉ sang trang Shopee t·∫°o link hoa h·ªìng.
            </div>
            <div class="step-item">
                <span class="step-num">3</span>
                <b>D√ÅN LINK XANH</b><br>D√°n c√°i link r√∫t g·ªçn v√†o √¥ vi·ªÅn xanh l√° c√¢y.
            </div>
            <div class="step-item">
                <span class="step-num">4</span>
                <b>XU·∫§T FILE & ƒêƒÇNG</b><br>B·∫•m "XU·∫§T FILE" (B·ªë ƒë·∫©y l√™n m·∫°ng) -> B·∫•m AI ƒë·ªÉ l·∫•y vƒÉn ƒëƒÉng b√†i.
            </div>
        </div>
    </div>

    <div class="box" style="border-top: 5px solid var(--s);">
        <h2>‚öôÔ∏è C·∫§U H√åNH H·ªÜ TH·ªêNG (D√†nh cho b·ªë & c√°c b√©)</h2>
        <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
            <input type="text" id="ghLink" style="flex:1" placeholder="Link GitHub Pages c·ªßa b·ªë..." onchange="saveAll()">
            <input type="file" id="csv" multiple accept=".csv" title="Ch·ªçn file CSV s·∫£n ph·∫©m">
            <button class="btn btn-gh" onclick="exportJson()">üíæ XU·∫§T FILE CHO GITHUB</button>
            <button class="btn btn-shopee" onclick="window.open('https://affiliate.shopee.vn/offer/custom_link', '_blank')">‚ÜóÔ∏è M·ªû TRANG R√öT G·ªåN SHOPEE</button>
            <button onclick="clearW()" style="background:#eee; border:none; padding:8px; border-radius:6px; cursor:pointer;">üóëÔ∏è D·ªåN KHO</button>
        </div>
    </div>

    <div class="box" style="border-top: 5px solid var(--v);">
        <h2>üë• CH·ªåN NG∆Ø·ªúI MAY M·∫ÆN (Gia ƒë√¨nh & B·∫°n b√®)</h2>
        <div style="background: #e3f2fd; padding: 10px; border-radius: 8px; margin-bottom: 10px; display: flex; gap: 8px;">
            <input type="text" id="newName" placeholder="T√™n b·∫°n m·ªõi..." style="width:180px">
            <input type="date" id="newBirth">
            <select id="newGen"><option value="Nam">Nam</option><option value="N·ªØ">N·ªØ</option></select>
            <button class="btn" style="background:var(--g); color:white" onclick="addM()">TH√äM V√ÄO DANH S√ÅCH</button>
        </div>
        <div id="mList" class="m-grid"></div>
    </div>

    <div class="box" style="border-top: 5px solid var(--g);">
        <h2>üéÅ KHO QU√Ä T·∫∂NG ƒê·ªäNH M·ªÜNH</h2>
        <table>
            <thead>
                <tr>
                    <th>S·∫£n ph·∫©m</th>
                    <th>Gi√°</th>
                    <th>1. Link GitHub (D√°n FB)</th>
                    <th>2. Link Affiliate (D√°n v√†o ƒë√¢y)</th>
                    <th>3. Vi·∫øt b√†i b·∫±ng AI</th>
                </tr>
            </thead>
            <tbody id="pArea"></tbody>
        </table>
    </div>
</div>

<script>
    // D·ªØ li·ªáu v√† logic c≈© ƒë∆∞·ª£c gi·ªØ nguy√™n nh∆∞ng t·ªëi ∆∞u l·∫°i h√†m hi·ªÉn th·ªã
    const fixedMems = [
        {n:"NGUY·ªÑN KH·∫ÆC NƒÇNG", d:"1944-06-04", g:"Nam"}, {n:"T√î TH·ªä H√Ä", d:"1948-08-29", g:"N·ªØ"},
        {n:"NGUY·ªÑN MINH NAM", d:"1971-03-03", g:"Nam"}, {n:"TH√ÇN TH·ªä KIM ANH", d:"1981-09-23", g:"N·ªØ"},
        {n:"NGUY·ªÑN T√î NG√ÇN AN", d:"2014-09-28", g:"N·ªØ"}, {n:"NGUY·ªÑN T√î MINH CH√ÇU", d:"2016-07-25", g:"N·ªØ"},
        {n:"NGUY·ªÑN T√î B√çCH NG·ªåC", d:"2020-02-05", g:"N·ªØ"}, {n:"NGUY·ªÑN TH·ªä MINH H·∫∞NG", d:"1974-01-07", g:"N·ªØ"},
        {n:"NG√î QU√ù C∆Ø·ªúNG", d:"1973-05-23", g:"Nam"}, {n:"NG√î GIA B√ÅCH", d:"2000-10-12", g:"Nam"},
        {n:"NG√î GIA LINH", d:"2005-04-05", g:"N·ªØ"}, {n:"NGUY·ªÑN TH·ªä MINH PH∆Ø∆†NG", d:"1978-11-06", g:"N·ªØ"},
        {n:"HO√ÄNG ANH D≈®NG", d:"1978-09-21", g:"Nam"}, {n:"HO√ÄNG H·∫¢I VINH", d:"2010-06-03", g:"Nam"},
        {n:"HO√ÄNG THI√äN B·∫†CH ANH", d:"2015-11-14", g:"N·ªØ"}, {n:"T√î KIM HU·ªÜ", d:"1960-08-09", g:"N·ªØ"},
        {n:"NGUY·ªÑN TU·∫§N ANH", d:"1983-10-23", g:"Nam"}, {n:"NGUY·ªÑN TH·∫æ ANH", d:"2001-03-24", g:"Nam"},
        {n:"NG√î TH·ªä MAI", d:"1948-12-12", g:"N·ªØ"}, {n:"T√î VI·ªÜT H∆ØNG", d:"1996-06-17", g:"Nam"},
        {n:"T√î TH·ªä H·ªíNG", d:"1964-10-10", g:"N·ªØ"}, {n:"V≈® VƒÇN HI·ªÜP", d:"1974-04-24", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä CHI", d:"1946-02-08", g:"N·ªØ"}, {n:"NGUY·ªÑN T√ÇN B·∫ÆC", d:"1957-11-30", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä T√ÇM", d:"1954-08-08", g:"N·ªØ"}, {n:"TH√ÇN VƒÇN GI·ªÆ", d:"1955-04-18", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä B√åNH", d:"1958-05-21", g:"N·ªØ"}, {n:"TH√ÇN TH·ªä B√çCH NGUY·ªÜT", d:"1980-05-21", g:"N·ªØ"},
        {n:"TH√ÇN VƒÇN TU·∫§N", d:"1983-05-21", g:"Nam"}, {n:"TH√ÇN Y·∫æN NHI", d:"2010-03-26", g:"N·ªØ"},
        {n:"L√ä TH·ªä PH∆Ø∆†NG", d:"1990-06-26", g:"N·ªØ"}, {n:"NGUY·ªÑN HO√ÄI NAM", d:"2004-06-02", g:"Nam"}
    ];

    let extraMems = JSON.parse(localStorage.getItem('extra_v18_2')) || [];
    let warehouse = JSON.parse(localStorage.getItem('war_v18_2')) || [];
    let selM = null;

    function saveAll() {
        localStorage.setItem('extra_v18_2', JSON.stringify(extraMems));
        localStorage.setItem('war_v18_2', JSON.stringify(warehouse));
        localStorage.setItem('gh_v18_2', document.getElementById('ghLink').value);
    }

    function addM() {
        const n = document.getElementById('newName').value.toUpperCase();
        const d = document.getElementById('newBirth').value;
        const g = document.getElementById('newGen').value;
        if(n && d) { extraMems.unshift({n, d, g}); document.getElementById('newName').value=""; saveAll(); renderM(); }
    }

    function renderM() {
        const all = [...extraMems, ...fixedMems];
        const lucky = all[Math.floor((new Date() - new Date("2024-01-01"))/(1000*60*60*24)) % all.length];
        document.getElementById('mList').innerHTML = `
            <div style="grid-column: 1/-1; background: #fff3bf; padding: 10px; border-radius: 8px; border: 2px dashed #f59f00; margin-bottom: 10px;">
                <strong>üåü NG∆Ø·ªúI MAY M·∫ÆN:</strong> 
                <button class="m-btn ${selM?.n === lucky.n ? 'active' : ''}" onclick='selectM(${JSON.stringify(lucky)})'>üéâ ${lucky.n} (Click ch·ªçn)</button>
            </div>
        ` + all.map((m, i) => `<button class="m-btn ${selM?.n === m.n ? 'active' : ''}" onclick='selectM(${JSON.stringify(m)})'>${m.n}</button>`).join('');
    }

    function selectM(m) { selM = m; renderM(); renderW(); }

    document.getElementById('csv').onchange = async (e) => {
        const files = Array.from(e.target.files);
        for (const file of files) {
            const text = await file.text();
            const lines = text.split('\n').slice(1);
            lines.forEach(l => {
                const c = l.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                if(c.length >= 5) {
                    const id = c[0].trim();
                    if(!warehouse.some(x => x.id === id)) {
                        warehouse.push({ id, name: c[1].replace(/"/g, ''), price: parseInt(c[2].replace(/[^0-9]/g, '')), linkAffiliate: "" });
                    }
                }
            });
        }
        saveAll(); renderW();
    };

    function renderW() {
        if(!selM) return;
        const lastChar = selM.n.trim().slice(-1).toUpperCase();
        let pool = warehouse.filter(p => p.name.trim().slice(-1).toUpperCase() === lastChar);
        
        document.getElementById('pArea').innerHTML = pool.slice(0, 10).map(p => {
            const gh = `${document.getElementById('ghLink').value}?id=${p.id}`;
            return `
            <tr>
                <td style="text-align:left"><b>${p.name}</b></td>
                <td style="color:var(--p)">${p.price.toLocaleString()}ƒë</td>
                <td><button onclick="copyLink('${gh}')" style="cursor:pointer; background:#fff; border:1px solid #ccc; padding:5px;">üìã Copy Link GitHub</button></td>
                <td><input type="text" class="input-aff" id="shopee_${p.id}" value="${p.linkAffiliate || ''}" onchange="updateAff('${p.id}', this.value)" placeholder="D√°n link xanh..."></td>
                <td>
                    <button class="btn-ai" style="background:var(--gpt)" onclick="goAI('ChatGPT','${p.id}')">ü§ñ GPT</button>
                    <button class="btn-ai" style="background:var(--x)" onclick="goAI('Grok','${p.id}')">üê¶ Grok</button>
                </td>
            </tr>`;
        }).join('');
    }

    function copyLink(txt) { navigator.clipboard.writeText(txt); alert("ƒê√£ copy Link GitHub ƒë·ªÉ d√°n v√†o Facebook!"); }
    
    function updateAff(id, val) {
        const p = warehouse.find(x => x.id === id);
        if(p) p.linkAffiliate = val;
        saveAll();
    }

    function goAI(ai, id) {
        const p = warehouse.find(x => x.id === id);
        const ghUrl = `${document.getElementById('ghLink').value}?id=${p.id}`;
        let prompt = `ƒê√≥ng vai 3 anh em nh√† con, vi·∫øt b√†i Facebook: H√¥m nay ${selM.n} l√† ng∆∞·ªùi may m·∫Øn! T·∫∑ng qu√† "${p.name}" v√¨ duy√™n ch·ªØ c√°i cu·ªëi "${selM.n.slice(-1)}". M·ªçi ng∆∞·ªùi v√†o link n√†y xem qu√† ·ªßng h·ªô con nh√©: ${ghUrl} (D·∫∑n m·ªçi ng∆∞·ªùi d√πng 4G mua h√†ng ·∫°)`;
        navigator.clipboard.writeText(prompt);
        alert("ƒê√£ copy l·ªùi d·∫´n! H√£y sang AI v√† chu·∫©n b·ªã ·∫£nh ng∆∞·ªùi th√¢n.");
        window.open(ai === 'ChatGPT' ? "https://chatgpt.com" : "https://x.com/i/grok", "_blank");
    }

    function exportJson() {
        const blob = new Blob([JSON.stringify(warehouse, null, 2)], {type: 'application/json'});
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'files.json'; a.click();
    }

    function clearW() { if(confirm("X√≥a kho h√†ng?")) { warehouse=[]; saveAll(); renderW(); } }
    if(localStorage.getItem('gh_v18_2')) document.getElementById('ghLink').value = localStorage.getItem('gh_v18_2');
    renderM();
</script>
</body>
</html>
