<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>ƒê∆∞·ªùng ƒêua Marketing Nh√≠ V18.5 - SI√äU C·∫§P</title>
    <style>
        :root { --s1: #ff4757; --s2: #ffa502; --s3: #2ed573; --s4: #1e90ff; --s5: #3742fa; --s6: #ed4c67; --s7: #2f3542; }
        body { font-family: 'Segoe UI', cursive; background: #f1f2f6; padding: 20px; color: #2f3542; line-height: 1.6; }
        
        .station { background: white; border-radius: 20px; padding: 25px; margin-bottom: 30px; box-shadow: 0 10px 0 #dfe4ea; border: 4px solid transparent; position: relative; display: none; }
        .station.active { display: block; animation: slideIn 0.5s ease; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .station h2 { margin-top: 0; font-size: 22px; color: white; padding: 10px 20px; border-radius: 15px; display: inline-block; transform: rotate(-1deg); margin-bottom: 20px; }
        
        .s1 { border-color: var(--s1); display: block; } .s1 h2 { background: var(--s1); }
        .s2 { border-color: var(--s2); } .s2 h2 { background: var(--s2); }
        .s3 { border-color: var(--s3); } .s3 h2 { background: var(--s3); }
        .s4 { border-color: var(--s4); } .s4 h2 { background: var(--s4); }
        .s5 { border-color: var(--s5); } .s5 h2 { background: var(--s5); }
        .s6 { border-color: var(--s6); } .s6 h2 { background: var(--s6); }
        .s7 { border-color: var(--s7); } .s7 h2 { background: var(--s7); }

        .m-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; }
        .m-btn { padding: 15px; border: 2px solid #eee; border-radius: 15px; cursor: pointer; background: #fff; font-weight: bold; }
        .m-btn.active { background: var(--s2); color: white; transform: scale(1.05); }

        .price-wheel { display: flex; gap: 10px; margin-bottom: 20px; }
        .p-btn { flex: 1; padding: 15px; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; color: white; opacity: 0.6; }
        .p-btn.active { opacity: 1; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.1); }

        .btn-big { padding: 18px 30px; font-size: 18px; border-radius: 50px; border: none; color: white; cursor: pointer; font-weight: bold; width: 100%; margin: 10px 0; transition: 0.3s; }
        .btn-big:hover { filter: brightness(1.1); transform: scale(1.01); }
        
        .ai-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn-ai { padding: 15px; border-radius: 12px; border: none; color: white; font-weight: bold; cursor: pointer; }
        
        input.big-input { width: 100%; padding: 18px; border: 3px solid var(--s5); border-radius: 15px; font-size: 16px; text-align: center; box-sizing: border-box; }
    </style>
</head>
<body>

<h1 style="text-align: center; font-size: 30px;">üöÄ H·ªÜ TH·ªêNG MARKETING NH√ç V18.5</h1>

<div class="station s1">
    <h2>üèÅ TR·∫†M 1: N·∫†P KHO H√ÄNG</h2>
    <input type="file" id="csv" multiple accept=".csv" style="width: 100%; padding: 20px; border: 3px dashed var(--s1); border-radius: 15px;">
    <p style="text-align:center; color: #666;">(B√© ch·ªçn file CSV s·∫£n ph·∫©m m√† b·ªë ƒë∆∞a cho nh√©)</p>
</div>

<div class="station s2" id="st2">
    <h2>üéØ TR·∫†M 2: CH·ªåN NG∆Ø·ªúI MAY M·∫ÆN</h2>
    <div id="mList" class="m-grid"></div>
</div>

<div class="station s3" id="st3">
    <h2>üí∞ TR·∫†M 3: T·∫¶NG GI√Å ƒê·ªäNH M·ªÜNH</h2>
    <div class="price-wheel">
        <button class="p-btn" style="background:#2ecc71" onclick="setPrice(0, 50000, this)">L (D∆∞·ªõi 50k)</button>
        <button class="p-btn" style="background:#3498db" onclick="setPrice(50000, 200000, this)">T (50k - 200k)</button>
        <button class="p-btn" style="background:#9b59b6" onclick="setPrice(200000, 1000000, this)">D (200k - 1tr)</button>
        <button class="p-btn active" style="background:#e67e22" onclick="setPrice(1000000, 99999999, this)">C (Tr√™n 1tr)</button>
    </div>
    <div id="autoSuggest" style="background: #f9f9f9; padding: 20px; border-radius: 15px; text-align: center; border: 2px solid #eee;">
        <p>ƒêang ch·ªù b√© ch·ªçn Ng∆∞·ªùi may m·∫Øn...</p>
    </div>
</div>

<div class="station s4" id="st4">
    <h2>üîó TR·∫†M 4: R√öT G·ªåN LINK SHOPEE</h2>
    <p id="targetProd" style="font-weight:bold; font-size:18px; color: var(--s4);"></p>
    <button class="btn-big" style="background: var(--s4);" onclick="openShopeeAff()">1. M·ªû TRANG R√öT G·ªåN SHOPEE</button>
    <p style="font-size:13px; color:#666;">(H·ªá th·ªëng ƒë√£ t·ª± copy link g·ªëc, b√© sang ƒë√≥ ch·ªâ c·∫ßn D√°n v√† R√∫t G·ªçn th√¥i!)</p>
</div>

<div class="station s5" id="st5">
    <h2>üíé TR·∫†M 5: D√ÅN LINK R√öT G·ªåN</h2>
    <input type="text" id="affLink" class="big-input" placeholder="D√°n link Affiliate b√© v·ª´a t·∫°o v√†o ƒë√¢y...">
    <button class="btn-big" style="background: var(--s3);" onclick="confirmAff()">‚úÖ X√ÅC NH·∫¨N V√Ä SANG B∆Ø·ªöC VI·∫æT TRUY·ªÜN</button>
</div>

<div class="station s6" id="st6">
    <h2>üßô‚Äç‚ôÇÔ∏è TR·∫†M 6: PH√ô TH·ª¶Y AI VI·∫æT TRUY·ªÜN</h2>
    <p style="background: #fff3f3; padding: 10px; border-radius: 10px; font-size: 14px;">B·∫•m ch·ªçn 1 ph√π th·ªßy, h·ªá th·ªëng s·∫Ω t·ª± copy l·ªùi d·∫´n "Ng·ª• Ng√¥n" ph√π h·ª£p v·ªõi gi·ªõi t√≠nh v√† l·ª©a tu·ªïi c·ªßa ng∆∞·ªùi nh·∫≠n!</p>
    <div class="ai-group">
        <button class="btn-ai" style="background:#10a37f" onclick="goAI('chatgpt')">ChatGPT</button>
        <button class="btn-ai" style="background:#4285f4" onclick="goAI('gemini')">Gemini</button>
        <button class="btn-ai" style="background:#000" onclick="goAI('grok')">Grok (X)</button>
        <button class="btn-ai" style="background:#6a1b9a" onclick="goAI('deepseek')">DeepSeek</button>
    </div>
</div>

<div class="station s7" id="st7">
    <h2>üì¶ TR·∫†M CU·ªêI: XU·∫§T B·∫¢N & ƒêƒÇNG B√ÄI</h2>
    <button class="btn-big" style="background: var(--s7);" onclick="exportJson()">üíæ 1. XU·∫§T FILE CHO GITHUB</button>
    <button class="btn-big" style="background: #1877F2;" onclick="alert('B√© h√£y d√°n link GitHub v√†o b√†i ƒëƒÉng Facebook k√®m theo truy·ªán AI v·ª´a vi·∫øt nh√©!')">üì± 2. ƒêƒÇNG B√ÄI L√äN FACEBOOK</button>
    <p style="text-align:center; font-size:12px;">Link GitHub c·ªßa b√©: <br><span id="finalGhLink" style="color:blue; font-weight:bold;"></span></p>
</div>

<script>
    const fixedMems = [
        {n:"NGUY·ªÑN KH·∫ÆC NƒÇNG", d:"1944-06-04", g:"Nam"}, {n:"T√î TH·ªä H√Ä", d:"1948-08-29", g:"N·ªØ"},
        {n:"NGUY·ªÑN MINH NAM", d:"1971-03-03", g:"Nam"}, {n:"TH√ÇN TH·ªä KIM ANH", d:"1981-09-23", g:"N·ªØ"},
        {n:"NGUY·ªÑN T√î NG√ÇN AN", d:"2014-09-28", g:"N·ªØ"}, {n:"NGUY·ªÑN T√î MINH CH√ÇU", d:"2016-07-25", g:"N·ªØ"},
        {n:"NGUY·ªÑN T√î B√çCH NG·ªåC", d:"2020-02-05", g:"N·ªØ"}, {n:"NGUY·ªÑN TH·ªä MINH H·∫∞NG", d:"1974-01-07", g:"N·ªØ"},
        {n:"NG√î QU√ù C∆Ø·ªúNG", d:"1973-05-23", g:"Nam"}, {n:"NG√î GIA B√ÅCH", d:"2000-10-12", g:"Nam"},
        {n:"NG√î GIA LINH", d:"2005-04-05", g:"N·ªØ"}, {n:"NGUY·ªÑN TH·ªä MINH PH∆Ø∆†NG", d:"1978-11-06", g:"N·ªØ"},
        {n:"HO√ÄNG ANH D≈®NG", d:"1978-09-21", g:"Nam"}, {n:"HO√ÄNG H·∫¢I VINH", d:"2010-06-03", g:"Nam"},
        {n:"HO√ÄNG THI√äN B·∫†CH ANH", d:"2015-11-14", g:"N·ªØ"}, {n:"T√î KIM HU·ªÜ", d:"1960-08-09", g:"N·ªØ"},
        {n:"NGUY·ªÑN TU·∫§N ANH", d:"1983-10-23", g:"Nam"}, {n:"NGUY·ªÑN TH·∫æ ANH", d:"2001-03-24", g:"Nam"},
        {n:"NG√î TH·ªä MAI", d:"1948-12-12", g:"N·ªØ"}, {n:"T√î VI·ªÜT H∆ØNG", d:"1996-06-17", g:"Nam"},
        {n:"T√î TH·ªä H·ªíNG", d:"1964-10-10", g:"N·ªØ"}, {n:"V≈® VƒÇN HI·ªÜP", d:"1974-04-24", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä CHI", d:"1946-02-08", g:"N·ªØ"}, {n:"NGUY·ªÑN T√ÇN B·∫ÆC", d:"1957-11-30", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä T√ÇM", d:"1954-08-08", g:"N·ªØ"}, {n:"TH√ÇN VƒÇN GI·ªÆ", d:"1955-04-18", g:"Nam"},
        {n:"NGUY·ªÑN TH·ªä B√åNH", d:"1958-05-21", g:"N·ªØ"}, {n:"TH√ÇN TH·ªä B√çCH NGUY·ªÜT", d:"1980-05-21", g:"N·ªØ"},
        {n:"TH√ÇN VƒÇN TU·∫§N", d:"1983-05-21", g:"Nam"}, {n:"TH√ÇN Y·∫æN NHI", d:"2010-03-26", g:"N·ªØ"},
        {n:"L√ä TH·ªä PH∆Ø∆†NG", d:"1990-06-26", g:"N·ªØ"}, {n:"NGUY·ªÑN HO√ÄI NAM", d:"2004-06-02", g:"Nam"}
    ];

    let warehouse = JSON.parse(localStorage.getItem('war_v18_5')) || [];
    let selM = null;
    let selP = null;
    let priceRange = { min: 1000000, max: 99999999 };
    const ghBase = "https://namnguyen7133-png.github.io/cua-hang-di-dong/001-kho-hang.html";

    document.getElementById('csv').onchange = async (e) => {
        const files = Array.from(e.target.files);
        for (const file of files) {
            const text = await file.text();
            const lines = text.split('\n').slice(1);
            lines.forEach(l => {
                const c = l.split(/,(?=(?:(?:[^\"" ]*\""){2})*[^\"" ]*$)/);
                if(c.length >= 5) {
                    const id = c[0].trim();
                    const url = c[c.length-1].trim().replace(/\""/g, '');
                    if(!warehouse.some(x => x.id === id)) {
                        warehouse.push({ id, name: c[1].replace(/\""/g, ''), price: parseInt(c[2].replace(/[^0-9]/g, '')), originalLink: url, linkAffiliate: "" });
                    }
                }
            });
        }
        localStorage.setItem('war_v18_5', JSON.stringify(warehouse));
        document.getElementById('st2').classList.add('active');
        renderM();
    };

    function renderM() {
        document.getElementById('mList').innerHTML = fixedMems.map(m => `
            <button class="m-btn ${selM?.n === m.n ? 'active' : ''}" onclick='selectM(${JSON.stringify(m)})'>
                ${m.n}<br><small>${m.g} - ${m.d.split('-')[0]}</small>
            </button>
        `).join('');
    }

    function selectM(m) { 
        selM = m; 
        document.getElementById('st3').classList.add('active');
        autoSuggest(); 
        renderM();
    }

    function setPrice(min, max, btn) {
        priceRange = { min, max };
        document.querySelectorAll('.p-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        autoSuggest();
    }

    function autoSuggest() {
        if(!selM) return;
        const lastChar = selM.n.trim().slice(-1).toUpperCase();
        let pool = warehouse.filter(p => p.name.trim().slice(-1).toUpperCase() === lastChar && p.price >= priceRange.min && p.price <= priceRange.max);
        const area = document.getElementById('autoSuggest');
        if(pool.length > 0) {
            selP = pool[Math.floor(Math.random() * pool.length)];
            area.innerHTML = `<h3>M√≥n qu√†: ${selP.name}</h3><p style="color:red; font-weight:bold;">Gi√°: ${selP.price.toLocaleString()}ƒë</p><button class="btn-big" style="background:var(--s3)" onclick="confirmP()">OK! SANG TR·∫†M R√öT G·ªåN</button>`;
        } else {
            area.innerHTML = `<p>H·∫øt qu√† ƒëu√¥i "${lastChar}" ·ªü m·ª©c gi√° n√†y r·ªìi b√© ∆°i!</p>`;
        }
    }

    function confirmP() {
        document.getElementById('st4').classList.add('active');
        document.getElementById('targetProd').innerText = "ƒêang x·ª≠ l√Ω: " + selP.name;
        navigator.clipboard.writeText(selP.originalLink);
        document.getElementById('st4').scrollIntoView();
    }

    function openShopeeAff() {
        window.open('https://affiliate.shopee.vn/offer/custom_link', '_blank');
        document.getElementById('st5').classList.add('active');
    }

    function confirmAff() {
        const val = document.getElementById('affLink').value;
        if(!val) return alert("D√°n link ƒë√£ b√©!");
        selP.linkAffiliate = val;
        const idx = warehouse.findIndex(x => x.id === selP.id);
        warehouse[idx] = selP;
        localStorage.setItem('war_v18_5', JSON.stringify(warehouse));
        document.getElementById('st6').classList.add('active');
    }

    function goAI(type) {
        const age = 2026 - parseInt(selM.d.split('-')[0]);
        const ghUrl = `${ghBase}?id=${selP.id}`;
        document.getElementById('finalGhLink').innerText = ghUrl;
        
        let prompt = `H√£y ƒë√≥ng vai m·ªôt b√© thi·∫øu nhi th√¥ng minh, vi·∫øt m·ªôt c√¢u chuy·ªán ng·ª• ng√¥n h√†i h∆∞·ªõc ho·∫∑c m·ªôt b√†i th∆° vui k·ªÉ v·ªÅ vi·ªác t·∫∑ng qu√† cho ${selM.n} (${selM.g}, ${age} tu·ªïi). 
        L√Ω do t·∫∑ng m√≥n qu√† "${selP.name}" (gi√° ${selP.price.toLocaleString()}ƒë) l√† v√¨ ƒë·ªãnh m·ªánh: c·∫£ t√™n ng∆∞·ªùi nh·∫≠n v√† m√≥n qu√† ƒë·ªÅu k·∫øt th√∫c b·∫±ng ch·ªØ "${selP.name.slice(-1)}". 
        K·∫øt b√†i h√†i h∆∞·ªõc nh·ªù m·ªçi ng∆∞·ªùi click v√†o link GitHub n√†y xem s·ª± t√≠ch v√† mua ·ªßng h·ªô: ${ghUrl}. (Nh·∫Øc m·ªçi ng∆∞·ªùi d√πng 4G ƒë·ªÉ ·ªßng h·ªô con)`;
        
        navigator.clipboard.writeText(prompt);
        alert("ƒê√£ copy Prompt! ƒêang m·ªü " + type);
        
        const urls = {
            chatgpt: "https://chatgpt.com",
            gemini: "https://gemini.google.com",
            grok: "https://x.com/i/grok",
            deepseek: "https://chat.deepseek.com"
        };
        window.open(urls[type], "_blank");
        document.getElementById('st7').classList.add('active');
    }

    function exportJson() {
        const blob = new Blob([JSON.stringify(warehouse, null, 2)], {type: 'application/json'});
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'files.json'; a.click();
    }
</script>
</body>
</html>
