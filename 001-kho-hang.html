<script>
    async function loadProduct() {
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');
        const app = document.getElementById('app');

        try {
            const response = await fetch('files.json');
            const data = await response.json();
            
            // Robot t√¨m ki·∫øm linh ho·∫°t: kh·ªõp c·∫£ s·ªë v√† ch·ªØ
            const p = data.find(x => String(x.id) === String(productId) || String(x["M√£ s·∫£n ph·∫©m"]) === String(productId));

            if (p) {
                app.innerHTML = `
                    <div class="img-box">
                        <img src="https://down-vn.img.susercontent.com/file/${productId}">
                    </div>
                    <div class="info">
                        <h1>${p.name || p["T√™n s·∫£n ph·∫©m"]}</h1>
                        <div class="price">${p.price || p["Gi√°"]}</div>
                        <a href="${p.affiliate_link || p["Link ∆∞u ƒë√£i"]}" class="btn-buy">üõí MUA NGAY TR√äN SHOPEE</a>
                    </div>
                `;
            } else {
                app.innerHTML = "‚ùå Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m trong kho!";
            }
        } catch (e) {
            app.innerHTML = "‚ùå L·ªói t·∫£i d·ªØ li·ªáu files.json!";
        }
    }
    loadProduct();
</script>
