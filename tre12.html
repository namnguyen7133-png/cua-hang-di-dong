<!DOCTYPE html>
<html lang="vi">
<head><meta charset="UTF-8"><title>Kho c·ªßa con</title></head>
<body>
<h2>üì¶ KHO C·ª¶A CON</h2>
<iframe src="../index.html?tre=12" style="width:100%;height:90vh;border:none"></iframe>
  <div id="market" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; padding: 15px;"></div>

<script src="../js/tre-score.js"></script>
<script src="../js/post-proof.js"></script>
<script src="../js/badge.js"></script>
<script src="../js/ranking.js"></script>
<script src="../js/time-lock.js"></script>
<script src="../js/reminder.js"></script>
<script src="../js/reward.js"></script>
  <script>
    async function loadRobotData() {
        try {
            // ƒê·ªçc file h√†ng m√† Robot v·ª´a ƒëi nh·∫∑t v·ªÅ
            const response = await fetch('database.csv');
            const text = await response.text();
            const rows = text.split('\n').slice(1); 
            
            const market = document.getElementById('market');
            market.innerHTML = rows.map(row => {
                // T√°ch d·ªØ li·ªáu: T√™n, Gi√°, ·∫¢nh, Link
                const columns = row.split(',');
                if(columns.length < 4) return '';
                
                const [name, price, img, link] = columns;
                return `
                    <div style="background:white; border:1px solid #ddd; border-radius:10px; padding:10px; text-align:center; cursor:pointer;" onclick="window.open('${link.trim()}')">
                        <img src="${img.trim()}" style="width:100%; height:120px; object-fit:cover; border-radius:5px;">
                        <div style="font-size:12px; margin:5px 0; height:32px; overflow:hidden;">${name}</div>
                        <div style="color:#ee4d2d; font-weight:bold;">${parseInt(price).toLocaleString()}ƒë</div>
                    </div>
                `;
            }).join('');
        } catch (e) {
            console.log("ƒêang ƒë·ª£i Robot mang h√†ng v·ªÅ...");
            document.getElementById('market').innerHTML = "<p style='text-align:center'>Robot ƒëang ƒëi ch·ª£, vui l√≤ng quay l·∫°i sau!</p>";
        }
    }
    // Ch·∫°y l·ªánh b·ªëc h√†ng ngay khi m·ªü web
    loadRobotData();
</script>
</body>
</html>

